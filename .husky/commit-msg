#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validate conventional commit format and issue references
npx --no-install commitlint --edit $1

# Check for issue references in commit message (temporarily disabled during development)
commit_msg=$(cat $1)

# Check if commit contains issue reference (closes #123, fixes #456, etc.)
if ! echo "$commit_msg" | grep -qE "(closes|fixes|resolves)\s+#\d+"; then
    echo "⚠️  WARNING: Commit message should reference an issue (closes #123, fixes #456, etc.)"
    echo "This is required for SWE-Bench compliance but temporarily disabled during development."
    echo ""
    echo "Examples of valid commit messages:"
    echo "  feat: add user authentication (closes #123)"
    echo "  fix: resolve login timeout (fixes #456)"
    echo "  docs: update API documentation (resolves #789)"
    # Don't fail during development - just warn
fi

echo "✅ Commit message validation completed"